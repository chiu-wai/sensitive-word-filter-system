{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, withKeys as _withKeys, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"records-page\"\n};\nconst _hoisted_2 = {\n  class: \"card-header\"\n};\nconst _hoisted_3 = {\n  class: \"total-count\"\n};\nconst _hoisted_4 = {\n  class: \"pagination-wrapper\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"detail-content\"\n};\nconst _hoisted_6 = {\n  class: \"text-section\"\n};\nconst _hoisted_7 = {\n  class: \"text-content\"\n};\nconst _hoisted_8 = {\n  class: \"text-section\"\n};\nconst _hoisted_9 = {\n  class: \"text-content filtered\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"text-section\"\n};\nconst _hoisted_11 = {\n  class: \"sensitive-words\"\n};\nconst _hoisted_12 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Location = _resolveComponent(\"Location\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n  const _component_Search = _resolveComponent(\"Search\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_Delete = _resolveComponent(\"Delete\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_View = _resolveComponent(\"View\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 搜索栏 \"), _createVNode(_component_el_card, {\n    class: \"search-card\",\n    shadow: \"hover\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_row, {\n      gutter: 20,\n      align: \"middle\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_col, {\n        span: 6\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.searchIp,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchIp = $event),\n          placeholder: \"搜索IP地址\",\n          clearable: \"\",\n          onKeyup: _withKeys($setup.handleSearch, [\"enter\"])\n        }, {\n          prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Location)]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_col, {\n        span: 8\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n          modelValue: $setup.dateRange,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.dateRange = $event),\n          type: \"datetimerange\",\n          \"range-separator\": \"至\",\n          \"start-placeholder\": \"开始时间\",\n          \"end-placeholder\": \"结束时间\",\n          format: \"YYYY-MM-DD HH:mm:ss\",\n          \"value-format\": \"YYYY-MM-DD HH:mm:ss\",\n          onChange: $setup.handleSearch\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onChange\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_col, {\n        span: 4\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.handleSearch\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Search)]),\n            _: 1 /* STABLE */\n          }), _cache[8] || (_cache[8] = _createTextVNode(\" 搜索 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */,\n          __: [8]\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_col, {\n        span: 6\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"danger\",\n          onClick: $setup.showCleanDialog\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Delete)]),\n            _: 1 /* STABLE */\n          }), _cache[9] || (_cache[9] = _createTextVNode(\" 清理记录 \", -1 /* CACHED */))]),\n          _: 1 /* STABLE */,\n          __: [9]\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 记录列表 \"), _createVNode(_component_el_card, {\n    class: \"list-card\",\n    shadow: \"hover\"\n  }, {\n    header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"过滤记录\", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_3, \"共 \" + _toDisplayString($setup.total) + \" 条记录\", 1 /* TEXT */)])]),\n    default: _withCtx(() => [_withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: $setup.records,\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"id\",\n        label: \"ID\",\n        width: \"80\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"createTime\",\n        label: \"时间\",\n        width: \"180\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString($setup.formatTime(scope.row.createTime)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"originalText\",\n        label: \"原始文本\",\n        \"show-overflow-tooltip\": \"\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"filteredText\",\n        label: \"过滤后文本\",\n        \"show-overflow-tooltip\": \"\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"filterCount\",\n        label: \"敏感词数量\",\n        width: \"120\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_tag, {\n          type: scope.row.filterCount > 0 ? 'danger' : 'success'\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(scope.row.filterCount), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"ipAddress\",\n        label: \"IP地址\",\n        width: \"140\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"userAgent\",\n        label: \"用户代理\",\n        width: \"200\",\n        \"show-overflow-tooltip\": \"\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"120\",\n        fixed: \"right\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: $event => $setup.showDetailDialog(scope.row)\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_View)]),\n            _: 1 /* STABLE */\n          }), _cache[11] || (_cache[11] = _createTextVNode(\" 详情 \", -1 /* CACHED */))]),\n          _: 2 /* DYNAMIC */,\n          __: [11]\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $setup.loading]]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_pagination, {\n      \"current-page\": $setup.currentPage,\n      \"onUpdate:currentPage\": _cache[2] || (_cache[2] = $event => $setup.currentPage = $event),\n      \"page-size\": $setup.pageSize,\n      \"onUpdate:pageSize\": _cache[3] || (_cache[3] = $event => $setup.pageSize = $event),\n      \"page-sizes\": [10, 20, 50, 100],\n      total: $setup.total,\n      layout: \"total, sizes, prev, pager, next, jumper\",\n      onSizeChange: $setup.handleSizeChange,\n      onCurrentChange: $setup.handleCurrentChange\n    }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"total\", \"onSizeChange\", \"onCurrentChange\"])])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 详情对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.detailDialogVisible,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.detailDialogVisible = $event),\n    title: \"过滤记录详情\",\n    width: \"800px\"\n  }, {\n    default: _withCtx(() => [$setup.currentRecord ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_el_descriptions, {\n      column: 2,\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n        label: \"记录ID\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.currentRecord.id), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"创建时间\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.formatTime($setup.currentRecord.createTime)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"IP地址\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.currentRecord.ipAddress), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"敏感词数量\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.currentRecord.filterCount), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"用户代理\",\n        span: 2\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.currentRecord.userAgent), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_divider, {\n      \"content-position\": \"left\"\n    }, {\n      default: _withCtx(() => _cache[12] || (_cache[12] = [_createTextVNode(\"文本内容\", -1 /* CACHED */)])),\n      _: 1 /* STABLE */,\n      __: [12]\n    }), _createElementVNode(\"div\", _hoisted_6, [_cache[13] || (_cache[13] = _createElementVNode(\"h4\", null, \"原始文本\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.currentRecord.originalText), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_cache[14] || (_cache[14] = _createElementVNode(\"h4\", null, \"过滤后文本\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_9, _toDisplayString($setup.currentRecord.filteredText), 1 /* TEXT */)]), $setup.currentRecord.sensitiveWords ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_cache[15] || (_cache[15] = _createElementVNode(\"h4\", null, \"检测到的敏感词\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.parseSensitiveWords($setup.currentRecord.sensitiveWords), word => {\n      return _openBlock(), _createBlock(_component_el_tag, {\n        key: word,\n        type: \"danger\",\n        effect: \"dark\",\n        style: {\n          \"margin\": \"5px\"\n        }\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(word), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */);\n    }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" 清理记录对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.cleanDialogVisible,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.cleanDialogVisible = $event),\n    title: \"清理历史记录\",\n    width: \"500px\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_12, [_createVNode(_component_el_button, {\n      onClick: _cache[6] || (_cache[6] = $event => $setup.cleanDialogVisible = false)\n    }, {\n      default: _withCtx(() => _cache[16] || (_cache[16] = [_createTextVNode(\"取消\", -1 /* CACHED */)])),\n      _: 1 /* STABLE */,\n      __: [16]\n    }), _createVNode(_component_el_button, {\n      type: \"danger\",\n      onClick: $setup.handleCleanRecords,\n      loading: $setup.cleanLoading\n    }, {\n      default: _withCtx(() => _cache[17] || (_cache[17] = [_createTextVNode(\" 确定清理 \", -1 /* CACHED */)])),\n      _: 1 /* STABLE */,\n      __: [17]\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"])])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, null, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"清理时间\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n          modelValue: $setup.cleanBeforeTime,\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.cleanBeforeTime = $event),\n          type: \"datetime\",\n          placeholder: \"选择时间\",\n          format: \"YYYY-MM-DD HH:mm:ss\",\n          \"value-format\": \"YYYY-MM-DD HH:mm:ss\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_alert, {\n          title: \"警告\",\n          type: \"warning\",\n          description: \"将删除指定时间之前的所有过滤记录，此操作不可恢复！\",\n          \"show-icon\": \"\",\n          closable: false\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createVNode","_component_el_card","shadow","_component_el_row","gutter","align","_component_el_col","span","_component_el_input","$setup","searchIp","$event","placeholder","clearable","onKeyup","_withKeys","handleSearch","prefix","_withCtx","_component_el_icon","_component_Location","_component_el_date_picker","dateRange","type","format","onChange","_component_el_button","onClick","_component_Search","showCleanDialog","_component_Delete","header","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","total","_createBlock","_component_el_table","data","records","style","_component_el_table_column","prop","label","width","default","scope","formatTime","row","createTime","_component_el_tag","filterCount","fixed","size","showDetailDialog","_component_View","loading","_hoisted_4","_component_el_pagination","currentPage","pageSize","layout","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","_component_el_dialog","detailDialogVisible","title","currentRecord","_hoisted_5","_component_el_descriptions","column","border","_component_el_descriptions_item","id","ipAddress","userAgent","_component_el_divider","_cache","_hoisted_6","_hoisted_7","originalText","_hoisted_8","_hoisted_9","filteredText","sensitiveWords","_hoisted_10","_hoisted_11","_Fragment","_renderList","parseSensitiveWords","word","key","effect","cleanDialogVisible","footer","_hoisted_12","handleCleanRecords","cleanLoading","_component_el_form","_component_el_form_item","cleanBeforeTime","_component_el_alert","description","closable"],"sources":["D:\\code\\sensitive-word-filter-system\\frontend\\src\\views\\Records.vue"],"sourcesContent":["<template>\r\n  <div class=\"records-page\">\r\n    <!-- 搜索栏 -->\r\n    <el-card class=\"search-card\" shadow=\"hover\">\r\n      <el-row :gutter=\"20\" align=\"middle\">\r\n        <el-col :span=\"6\">\r\n          <el-input\r\n            v-model=\"searchIp\"\r\n            placeholder=\"搜索IP地址\"\r\n            clearable\r\n            @keyup.enter=\"handleSearch\"\r\n          >\r\n            <template #prefix>\r\n              <el-icon><Location /></el-icon>\r\n            </template>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-date-picker\r\n            v-model=\"dateRange\"\r\n            type=\"datetimerange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始时间\"\r\n            end-placeholder=\"结束时间\"\r\n            format=\"YYYY-MM-DD HH:mm:ss\"\r\n            value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n            @change=\"handleSearch\"\r\n          />\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"handleSearch\">\r\n            <el-icon><Search /></el-icon>\r\n            搜索\r\n          </el-button>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-button type=\"danger\" @click=\"showCleanDialog\">\r\n            <el-icon><Delete /></el-icon>\r\n            清理记录\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-card>\r\n\r\n    <!-- 记录列表 -->\r\n    <el-card class=\"list-card\" shadow=\"hover\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>过滤记录</span>\r\n          <span class=\"total-count\">共 {{ total }} 条记录</span>\r\n        </div>\r\n      </template>\r\n      \r\n      <el-table :data=\"records\" style=\"width: 100%\" v-loading=\"loading\">\r\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\r\n        <el-table-column prop=\"createTime\" label=\"时间\" width=\"180\">\r\n          <template #default=\"scope\">\r\n            {{ formatTime(scope.row.createTime) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"originalText\" label=\"原始文本\" show-overflow-tooltip />\r\n        <el-table-column prop=\"filteredText\" label=\"过滤后文本\" show-overflow-tooltip />\r\n        <el-table-column prop=\"filterCount\" label=\"敏感词数量\" width=\"120\">\r\n          <template #default=\"scope\">\r\n            <el-tag :type=\"scope.row.filterCount > 0 ? 'danger' : 'success'\">\r\n              {{ scope.row.filterCount }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"ipAddress\" label=\"IP地址\" width=\"140\" />\r\n        <el-table-column prop=\"userAgent\" label=\"用户代理\" width=\"200\" show-overflow-tooltip />\r\n        <el-table-column label=\"操作\" width=\"120\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button type=\"primary\" size=\"small\" @click=\"showDetailDialog(scope.row)\">\r\n              <el-icon><View /></el-icon>\r\n              详情\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <!-- 分页 -->\r\n      <div class=\"pagination-wrapper\">\r\n        <el-pagination\r\n          v-model:current-page=\"currentPage\"\r\n          v-model:page-size=\"pageSize\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 详情对话框 -->\r\n    <el-dialog\r\n      v-model=\"detailDialogVisible\"\r\n      title=\"过滤记录详情\"\r\n      width=\"800px\"\r\n    >\r\n      <div v-if=\"currentRecord\" class=\"detail-content\">\r\n        <el-descriptions :column=\"2\" border>\r\n          <el-descriptions-item label=\"记录ID\">{{ currentRecord.id }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"创建时间\">{{ formatTime(currentRecord.createTime) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"IP地址\">{{ currentRecord.ipAddress }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"敏感词数量\">{{ currentRecord.filterCount }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"用户代理\" :span=\"2\">{{ currentRecord.userAgent }}</el-descriptions-item>\r\n        </el-descriptions>\r\n        \r\n        <el-divider content-position=\"left\">文本内容</el-divider>\r\n        \r\n        <div class=\"text-section\">\r\n          <h4>原始文本</h4>\r\n          <div class=\"text-content\">{{ currentRecord.originalText }}</div>\r\n        </div>\r\n        \r\n        <div class=\"text-section\">\r\n          <h4>过滤后文本</h4>\r\n          <div class=\"text-content filtered\">{{ currentRecord.filteredText }}</div>\r\n        </div>\r\n        \r\n        <div v-if=\"currentRecord.sensitiveWords\" class=\"text-section\">\r\n          <h4>检测到的敏感词</h4>\r\n          <div class=\"sensitive-words\">\r\n            <el-tag \r\n              v-for=\"word in parseSensitiveWords(currentRecord.sensitiveWords)\" \r\n              :key=\"word\" \r\n              type=\"danger\" \r\n              effect=\"dark\"\r\n              style=\"margin: 5px;\"\r\n            >\r\n              {{ word }}\r\n            </el-tag>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 清理记录对话框 -->\r\n    <el-dialog\r\n      v-model=\"cleanDialogVisible\"\r\n      title=\"清理历史记录\"\r\n      width=\"500px\"\r\n    >\r\n      <el-form>\r\n        <el-form-item label=\"清理时间\">\r\n          <el-date-picker\r\n            v-model=\"cleanBeforeTime\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择时间\"\r\n            format=\"YYYY-MM-DD HH:mm:ss\"\r\n            value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-alert\r\n            title=\"警告\"\r\n            type=\"warning\"\r\n            description=\"将删除指定时间之前的所有过滤记录，此操作不可恢复！\"\r\n            show-icon\r\n            :closable=\"false\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"cleanDialogVisible = false\">取消</el-button>\r\n          <el-button type=\"danger\" @click=\"handleCleanRecords\" :loading=\"cleanLoading\">\r\n            确定清理\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { filterApi } from '../utils/api'\r\n\r\nexport default {\r\n  name: 'Records',\r\n  setup() {\r\n    const loading = ref(false)\r\n    const cleanLoading = ref(false)\r\n    const currentPage = ref(1)\r\n    const pageSize = ref(10)\r\n    const total = ref(0)\r\n    const searchIp = ref('')\r\n    const dateRange = ref([])\r\n    const records = ref([])\r\n    const detailDialogVisible = ref(false)\r\n    const cleanDialogVisible = ref(false)\r\n    const currentRecord = ref(null)\r\n    const cleanBeforeTime = ref('')\r\n\r\n    // 加载记录列表\r\n    const loadRecords = async () => {\r\n      loading.value = true\r\n      try {\r\n        const response = await filterApi.getRecords(currentPage.value, pageSize.value)\r\n        if (response.data.code === 200) {\r\n          const data = response.data.data\r\n          records.value = data.list\r\n          total.value = data.total\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('加载记录列表失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    // 搜索\r\n    const handleSearch = () => {\r\n      currentPage.value = 1\r\n      loadRecords()\r\n    }\r\n\r\n    // 显示详情对话框\r\n    const showDetailDialog = (record) => {\r\n      currentRecord.value = record\r\n      detailDialogVisible.value = true\r\n    }\r\n\r\n    // 显示清理对话框\r\n    const showCleanDialog = () => {\r\n      cleanDialogVisible.value = true\r\n    }\r\n\r\n    // 清理记录\r\n    const handleCleanRecords = async () => {\r\n      if (!cleanBeforeTime.value) {\r\n        ElMessage.warning('请选择清理时间')\r\n        return\r\n      }\r\n\r\n      try {\r\n        await ElMessageBox.confirm(\r\n          `确定要删除 ${cleanBeforeTime.value} 之前的所有记录吗？此操作不可恢复！`,\r\n          '警告',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n        )\r\n\r\n        cleanLoading.value = true\r\n        const response = await filterApi.cleanHistoryRecords(cleanBeforeTime.value)\r\n        if (response.data.code === 200) {\r\n          ElMessage.success('清理成功')\r\n          cleanDialogVisible.value = false\r\n          cleanBeforeTime.value = ''\r\n          loadRecords()\r\n        } else {\r\n          ElMessage.error(response.data.message || '清理失败')\r\n        }\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('清理失败')\r\n        }\r\n      } finally {\r\n        cleanLoading.value = false\r\n      }\r\n    }\r\n\r\n    // 分页处理\r\n    const handleSizeChange = (val) => {\r\n      pageSize.value = val\r\n      currentPage.value = 1\r\n      loadRecords()\r\n    }\r\n\r\n    const handleCurrentChange = (val) => {\r\n      currentPage.value = val\r\n      loadRecords()\r\n    }\r\n\r\n    // 工具函数\r\n    const formatTime = (time) => {\r\n      if (!time) return ''\r\n      return new Date(time).toLocaleString()\r\n    }\r\n\r\n    const parseSensitiveWords = (wordsStr) => {\r\n      try {\r\n        return JSON.parse(wordsStr)\r\n      } catch (error) {\r\n        return []\r\n      }\r\n    }\r\n\r\n    onMounted(() => {\r\n      loadRecords()\r\n    })\r\n\r\n    return {\r\n      loading,\r\n      cleanLoading,\r\n      currentPage,\r\n      pageSize,\r\n      total,\r\n      searchIp,\r\n      dateRange,\r\n      records,\r\n      detailDialogVisible,\r\n      cleanDialogVisible,\r\n      currentRecord,\r\n      cleanBeforeTime,\r\n      loadRecords,\r\n      handleSearch,\r\n      showDetailDialog,\r\n      showCleanDialog,\r\n      handleCleanRecords,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      formatTime,\r\n      parseSensitiveWords\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.records-page {\r\n  padding: 20px;\r\n}\r\n\r\n.search-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.list-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.total-count {\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.pagination-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.detail-content {\r\n  max-height: 600px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.text-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.text-section h4 {\r\n  margin-bottom: 10px;\r\n  color: #303133;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n\r\n.text-content {\r\n  padding: 15px;\r\n  background-color: #f8f9fa;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  min-height: 80px;\r\n  word-break: break-all;\r\n  line-height: 1.6;\r\n}\r\n\r\n.text-content.filtered {\r\n  color: #e6a23c;\r\n  font-weight: bold;\r\n}\r\n\r\n.sensitive-words {\r\n  background-color: #f8f9fa;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  min-height: 60px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .search-card .el-row {\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .search-card .el-col {\r\n    width: 100%;\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}